{% extends 'base.html' %}
{% block content %}
<div class="mb-3">
    <a href="{% url 'chat_index' %}" class="btn btn-secondary btn-sm">â† Back</a>
</div>

<h4>
    {% if chat.is_group %}
        {{ chat.name }}
    {% else %}
        {{ other_user.username }}
    {% endif %}
</h4>

<div class="card p-3 mb-3" style="max-height: 400px; overflow-y: auto;">
    {% for message in messages %}
        <div class="mb-2 {% if message.sender == user %}text-end{% endif %}">
            <div class="d-inline-block px-3 py-2 rounded {% if message.sender == user %}bg-primary text-white{% else %}bg-light{% endif %}">
                <strong>{{ message.sender.username }}</strong><br>
                {{ message.content }}
            </div>
            <div class="text-muted small">{{ message.timestamp|date:"M d, H:i" }}</div>
        </div>
    {% empty %}
        <p class="text-muted">No messages yet.</p>
    {% endfor %}
</div>

<form method="post" class="d-flex gap-2">
    {% csrf_token %}
    <input type="text" name="content" class="form-control" placeholder="Type a message..." autocomplete="off" required>
    <button type="submit" class="btn btn-success">Send</button>
</form>
{% endblock %}
