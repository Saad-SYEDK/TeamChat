{% extends "base.html" %}
{% block content %}
<a href="{% url 'chat_index' %}">&larr; Back to Chats</a>

<h2>
    {% if chat.is_group %}
        {{ chat.name }}
    {% else %}
        {{ other_user.username }}
    {% endif %}
</h2>

<div class="messages">
    {% for message in messages %}
        <div class="message">
            <strong>{{ message.sender.username }}</strong>:
            {{ message.content }}
            <small class="text-muted">{{ message.timestamp|date:"Y-m-d H:i:s" }}</small>
        </div>
    {% empty %}
        <p>No messages yet.</p>
    {% endfor %}
</div>

<form method="post" autocomplete="off" action="{% url 'send_message' chat.id %}">
    {% csrf_token %}
    <input type="text" name="content"  placeholder="Type a message" class="form-control" required>
    <button type="submit" class="btn btn-primary mt-2">Send</button>
</form>

{% endblock %}
